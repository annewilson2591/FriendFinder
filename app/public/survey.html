<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <title>FriendFinder - Survey</title>
        <!-- materialize -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
        <!-- materialize icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- <link rel="stylesheet" type="text/css" href="../css/style.css"> -->
        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>

</head>

<body>

        <div class="container">
                <div class='card-panel teal lighten-2 col s12 center-align'>
                        <h4><strong>Survey Questions</strong></h4>
                        <div class='card-panel left-align white'>
                                <h5><strong>About You</strong></h5>
                                <br>
                                <input id="name" type="text" class="validate" required>
                                <label class='active' for="name">Name (required)</label>
                                <input id="photo" type="text" class="validate" required>
                                <label class='active' for="name">Link to Photo Image (required)</label>

                                <h5><strong>Question 1</strong></h5>
                                <p>Which of the following best describes your sibling situation?</p>
                                <select data-placeholder="" class="browser-default" id="q1">
                                        <option value="">Choose an option</option>
                                        <option value="1">I have one sibling that is my greatest rival</option>
                                        <option value="2">I have a couple siblings I don't get along with so well
                                        </option>
                                        <option value="3">I have multiple siblings and I love them all</option>
                                        <option value="4">I have one sibling that drives be CRAZY but is one of my best friends</option>
                                        <option value="5">I'm an only child</option>
                                </select>

                                <h5><strong>Question 2</strong></h5>
                                <p>Which of the following sound most appealing to you?</p>
                                <select data-placeholder="" class="browser-default" id="q2">
                                        <option value="">Choose an option</option>
                                        <option value="1">Shopping</option>
                                        <option value="2">Cooking or cleaning</option>
                                        <option value="3">Eating</option>
                                        <option value="4">Relaxing on the couch watching TV</option>
                                        <option value="5">Visiting a museum</option>
                                </select>

                                <h5><strong>Question 3</strong></h5>
                                <p>Which of the following describes your dreams for the future</p>
                                <select data-placeholder="" class="browser-default" id="q3">
                                        <option value="">Choose an option</option>
                                        <option value="1">I have no idea</option>
                                        <option value="2">Making it big</option>
                                        <option value="3">Marrying and having a family</option>
                                        <option value="4">Ending up with my true love</option>
                                        <option value="5">To be happy and care-free</option>
                                </select>

                                <h5><strong>Question 4</strong></h5>
                                <p>Which of the following describes your greatest attribute?</p>
                                <select data-placeholder="" class="browser-default" id="q4">
                                        <option value="">Choose an option</option>
                                        <option value="1">My intelligence</option>
                                        <option value="2">My morals</option>
                                        <option value="3">My way with the ladies/guys</option>
                                        <option value="4">My strong will</option>
                                        <option value="5">My appearance</option>
                                </select>

                                <h5><strong>Question 5</strong></h5>
                                <p>What would you consider to be your worst attribute?</p>
                                <select data-placeholder="" class="browser-default" id="q5">
                                        <option value="">Choose an option</option>
                                        <option value="1">I'm socially awkward</option>
                                        <option value="2">I'm too sensitive</option>
                                        <option value="3">I'm obsessive</option>
                                        <option value="4">I'm too submissive</option>
                                        <option value="5">I'm a total pushover</option>
                                </select>

                                <h5><strong>Question 6</strong></h5>
                                <p>You just found out your best friend and sibling are dating, how do you react?</p>
                                <select data-placeholder="" class="browser-default" id="q6">
                                        <option value="">Choose an option</option>
                                        <option value="1">I'm super excited!</option>
                                        <option value="2">I give my friend 'the talk'</option>
                                        <option value="3">I'm protective of my sibling</option>
                                        <option value="4">EW! Why would they date my sibling?</option>
                                        <option value="5">I don't have a sibling</option>
                                </select>

                                <h5><strong>Question 7</strong></h5>
                                <p>In school, which group did you belong in?</p>
                                <select data-placeholder="" class="browser-default" id="q7">
                                        <option value="">Choose an option</option>
                                        <option value="1">Popular</option>
                                        <option value="2">Nerdy</option>
                                        <option value="3">Jocks</option>
                                        <option value="4">Complete Outcast</option>
                                        <option value="5">I didn't get to go to school</option>
                                </select>

                                <h5><strong>Question 8</strong></h5>
                                <p>Which of the following do you value the most?</p>
                                <select data-placeholder="" class="browser-default" id="q8">
                                        <option value="">Choose an option</option>
                                        <option value="1">Your friends</option>
                                        <option value="2">Your relationship</option>
                                        <option value="3">Your morals</option>
                                        <option value="4">Your work</option>
                                        <option value="5">Your family</option>
                                </select>

                                <h5><strong>Question 9</strong></h5>
                                <p>In a team project, which role would you most likely take?</p>
                                <select data-placeholder="" class="browser-default" id="q9">
                                        <option value="">Choose an option</option>
                                        <option value="1">Sitting back and watching</option>
                                        <option value="2">Giving ideas/creativity</option>
                                        <option value="3">Information Seeker</option>
                                        <option value="4">Team leader</option>
                                        <option value="5">Dealing with the numbers</option>
                                </select>

                                <h5><strong>Question 10</strong></h5>
                                <p>What attracts you the most in a significant other?</p>
                                <select data-placeholder="" class="browser-default" id="q10">
                                        <option value="">Choose an option</option>
                                        <option value="1">Their intelligence</option>
                                        <option value="2">Their appearance</option>
                                        <option value="3">Their loyalty</option>
                                        <option value="4">Their sense of humor</option>
                                        <option value="5">Sexual chemistry</option>
                                </select>

                                <br>
                                <br>

                                <!-- Materialize Modal Trigger/Submit Button -->
                                <button type ="submit" data-target="modal1" class="waves-effect waves-light btn modal-trigger cyan lighten-1" id="submitBtn">Submit</button>
                        </div>
                </div>
                <div class='col s4'>
                        <p><a href='/api/friends'>API Friends List</a> | <a href='https://annewilson2591.github.io/FriendFinder/' target='_blank'>GitHub Repo</a></p>
                </div>

                <!-- Materialize Modal  -->
                <div id="modal1" class="modal yellow darken-1">
                        <div class="modal-content">
                          <h4>Best 'Friend' Match</h4>
                          <h5 id="matchName"></h5>
                          <img id="matchPic" src="" alt="No Image" width = 250px>
                        </div>
                      <div class="modal-footer">
                        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Done</a>
                      </div>
                    </div>
              
                </div>



                        <script type="text/javascript">
                        $(document).ready(function() {
                                $("#submitBtn").on("click", function() {
                                        //form validation
                                        function validateForm() {
                                        var isValid = true;
                                        $('.validate').each(function() {
                                                if ($(this).val() === ''){
                                                isValid = false;
                                                }
                                        });
                                                        
                                        $('.browser-default').each(function() {
                                                if ($(this).val() === ""){
                                                isValid = false;
                                                }
                                        });
                                        return isValid;
                                        }

                                        if (validateForm() == true) {
                                                var userData = {
                                                        name: $("#name").val(),
                                                        friendPic: $("#photo").val().trim(),
                                                        scores: [
                                                                $("#q1").val(),
                                                                $("#q2").val(),
                                                                $("#q3").val(),
                                                                $("#q4").val(),
                                                                $("#q5").val(),
                                                                $("#q6").val(),
                                                                $("#q7").val(),
                                                                $("#q8").val(),
                                                                $("#q9").val(),
                                                                $("#q10").val()
                                                        ]
                                                };

                                                //grab the current URL of the website
                                                var currentURL = window.location.origin;

                                                $.post(currentURL + "/api/friends", userData, function (data) {

                                                        $("#matchName").text(data.name);
                                                        $("matchPic").attr("src", data.friendPic);
                                                });
                                                        //show modal with beset match
                                                        $('.modal').modal();
                                                
                                                        //clear form after submission
                                                        // $('#name').val("");
                                                        // $('#photo').val("");
                                                        // $('#q1').val("");
                                                        // $('#q2').val("");
                                                        // $('#q3').val("");
                                                        // $('#q4').val("");
                                                        // $('#q5').val("");
                                                        // $('#q6').val("");
                                                        // $('#q7').val("");
                                                        // $('#q8').val("");
                                                        // $('#q9').val("");
                                                        // $('#q10').val("");
                                        } else {
                                                alert("Please fill out ALL fields before submitting")
                                        }
                                });
                        });
                        </script>

</body>
</html>